<!DOCTYPE html> 
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LaTRONIC Cart</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Josefin+Sans:ital,wght@0,100..700;1,100..700&family=Oswald:wght@200..700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
<style>
  body { margin:0; font-family: Arial, sans-serif; background:#121212; color:#fff; display:flex; min-height:100vh; }
  aside { width:250px; background:#1e1e1e; padding:1rem; position:sticky; top:0; height:100vh; display:flex; flex-direction:column; justify-content:space-between; }
  aside h2 { font-size:1.2rem; margin-bottom:1rem; }
  .menu { list-style:none; padding:0; margin:0; }
  .menu>li { margin-bottom:0.5rem; }
  .boton-categoria { display:block; background:none; border:none; color:#fff; text-align:left; width:100%; padding:0.5rem; font-size:1rem; cursor:pointer; transition: background 0.3s; text-decoration:none; }
  .boton-categoria:hover, .boton-categoria.active { background:#e28e2fa9; color:black; border-radius:5px; }
  .submenu { list-style:none; padding-left:1rem; display:none; }
  .submenu li { margin-bottom:0.3rem; }
  .submenu .boton-categoria { font-size:0.9rem; color:#e28f2f; }
  .submenu .boton-categoria:hover { font-size:0.9rem; background-color:#f16413b9; color:#e7d809; }
  main { flex:1; padding:2rem; }
  footer { text-align:center; padding:1rem 0; color:rgba(128,128,128,0.6); font-size:0.9rem; }
  .logo { font-family:"Bebas Neue",sans-serif; font-size:3rem; letter-spacing:2px; text-align:center; text-transform:uppercase; display:inline-block; position:relative; color:#f16413b9; padding:1rem 2rem; border-radius:12px; }

  .cart-producto { display:flex; justify-content:space-between; align-items:center; background:#1e1e1e; padding:1rem; border-radius:10px; margin-bottom:1rem; box-shadow:0 4px 8px rgba(0,0,0,0.5); }
  .cart-producto img { width:80px; height:80px; border-radius:8px; object-fit:cover; margin-right:1rem; }
  .cart-producto-info { flex:1; }
  .cart-producto-info h3 { margin:0 0 0.3rem 0; font-size:1rem; }
  .cart-producto-info p { margin:0.2rem 0; display:flex; align-items:center; gap:0.5rem; font-size:0.9rem; }

  .boton-carrito { font-family:"Oswald", sans-serif; border:none; padding:0.8rem 1.2rem; border-radius:8px; cursor:pointer; font-size:0.9rem; transition:0.3s; background:#e28f2f; color:black; font-weight:bold; }
  .boton-carrito:hover { background:#f16413; color:white; }

  .boton-cantidad { background:#e28f2f; color:white; border:none; border-radius:5px; padding:0.2rem 0.6rem; cursor:pointer; font-weight:bold; transition:0.3s; }
  .boton-cantidad:hover { background:#f16413b9; color:black; }
  .boton-cantidad:disabled { background:#555; color:#ccc; cursor:not-allowed; }

  .cart-acciones { margin-top:2rem; display:flex; justify-content:space-between; align-items:center; background:#1e1e1e; padding:1rem; border-radius:10px; box-shadow:0 4px 8px rgba(0,0,0,0.5); flex-wrap:wrap; gap:1rem; }
  #cart-vacio { font-size:1.2rem; text-align:center; margin-top:2rem; color:#ccc; }

  /* Carrito elegante en el men√∫ */
  .cart-button-container button { font-family:"Bebas Neue", sans-serif; background:none; border:none; color:#fff; text-align:left; width:100%; padding:0.6rem 1rem; font-size:1.1rem; cursor:pointer; transition:0.3s; border-radius:5px; }
  .cart-button-container button:hover { background:#e28e2fa9; color:black; }
  .back-menu { margin-bottom:1rem; font-family:"Oswald", sans-serif; background:#e28f2f; color:black; border:none; padding:0.6rem 1rem; border-radius:8px; cursor:pointer; font-weight:bold; transition:0.3s; }
  .back-menu:hover { background:#f16413; color:white; }

  .input-group { margin-top:1rem; }
  .input-group label { font-size:0.9rem; font-weight:600; margin-bottom:4px; display:block; }
  .input-group select { width:100%; padding:8px; border-radius:8px; border:1px solid #ccc; font-size:0.9rem; }
</style>
</head>
<body>
<aside>
  <h1 class="logo">LaTRONIC</h1>
  <ul class="menu">
    <li><a class="boton-categoria" href="Home.html">Home</a></li>
    <li><button class="boton-categoria toggle-submenu">New</button>
      <ul class="submenu">
        <li><button class="boton-categoria" id="new-basketball">Basketball</button></li>
        <li><button class="boton-categoria" id="new-pokemon">Pokemon</button></li>
        <li><button class="boton-categoria" id="new-baseball">Baseball</button></li>
      </ul>
    </li>
    <li><button class="boton-categoria toggle-submenu">Used</button>
      <ul class="submenu">
        <li><button class="boton-categoria" id="used-basketball">Basketball</button></li>
        <li><button class="boton-categoria" id="used-pokemon">Pokemon</button></li>
        <li><button class="boton-categoria" id="used-baseball">Baseball</button></li>
      </ul>
    </li>
    <li><button class="boton-categoria" id="handmade">Handmade</button></li>
    <li class="cart-button-container">
      <button id="ir-carrito">üõí Cart (<span id="cart-count">0</span>)</button>
    </li>
  </ul>

  <footer>
    <div>üìû +1 555-123-4567</div>
    <div>‚úâÔ∏è latronicstore@gmail.com</div>
    <div>‚ìí 2025 LaTRONIC LLC</div>
  </footer>
</aside>

<main>
  <button class="back-menu" onclick="window.location.href='index.html'">‚Üê Back to Menu</button>
  <h1 class="titulo-principal">Your Cart</h1>
  <div id="cart-vacio" style="display:none;">Your cart is empty <i class="bi bi-emoji-frown"></i></div>
  <div id="cart-productos"></div>

  <div class="cart-acciones" id="cart-acciones" style="display:none;">
    <button id="cart-acciones-vaciar" class="boton-carrito">Empty Cart</button>
    <button id="cart-acciones-buy" class="boton-carrito">Buy Now</button>

    <!-- NUEVO: Select de estados -->
    <div class="input-group">
      <label for="estado">Select your state:</label>
      <select id="estado">
        <option value="AL">Alabama</option>
        <option value="AK">Alaska</option>
        <option value="AZ">Arizona</option>
        <option value="AR">Arkansas</option>
        <option value="CA">California</option>
        <option value="CO">Colorado</option>
        <option value="CT">Connecticut</option>
        <option value="DE">Delaware</option>
        <option value="FL">Florida</option>
        <option value="GA">Georgia</option>
        <option value="HI">Hawaii</option>
        <option value="ID">Idaho</option>
        <option value="IL">Illinois</option>
        <option value="IN">Indiana</option>
        <option value="IA">Iowa</option>
        <option value="KS">Kansas</option>
        <option value="KY">Kentucky</option>
        <option value="LA">Louisiana</option>
        <option value="ME">Maine</option>
        <option value="MD">Maryland</option>
        <option value="MA">Massachusetts</option>
        <option value="MI">Michigan</option>
        <option value="MN">Minnesota</option>
        <option value="MS">Mississippi</option>
        <option value="MO">Missouri</option>
        <option value="MT">Montana</option>
        <option value="NE">Nebraska</option>
        <option value="NV">Nevada</option>
        <option value="NH">New Hampshire</option>
        <option value="NJ">New Jersey</option>
        <option value="NM">New Mexico</option>
        <option value="NY">New York</option>
        <option value="NC">North Carolina</option>
        <option value="ND">North Dakota</option>
        <option value="OH">Ohio</option>
        <option value="OK">Oklahoma</option>
        <option value="OR">Oregon</option>
        <option value="PA">Pennsylvania</option>
        <option value="RI">Rhode Island</option>
        <option value="SC">South Carolina</option>
        <option value="SD">South Dakota</option>
        <option value="TN">Tennessee</option>
        <option value="TX">Texas</option>
        <option value="UT">Utah</option>
        <option value="VT">Vermont</option>
        <option value="VA">Virginia</option>
        <option value="WA">Washington</option>
        <option value="WV">West Virginia</option>
        <option value="WI">Wisconsin</option>
        <option value="WY">Wyoming</option>
      </select>
    </div>
  </div>
</main>

<script>
const productosTienda = JSON.parse(localStorage.getItem("productos-tienda")) || [];
let cart = JSON.parse(localStorage.getItem("productos-en-cart")) || [];

function actualizarCarrito() {
  const cartProductosEl = document.getElementById("cart-productos");
  const cartAccionesEl = document.getElementById("cart-acciones");
  const cartVacioEl = document.getElementById("cart-vacio");

  if(cart.length===0){ 
    cartVacioEl.style.display="block"; 
    cartAccionesEl.style.display="none"; 
    cartProductosEl.innerHTML=""; 
    return; 
  } 
  cartVacioEl.style.display="none"; 
  cartAccionesEl.style.display="flex"; 
  cartProductosEl.innerHTML="";

  cart.forEach(p=>{
    const productoStock = productosTienda.find(pt=>pt.id===p.id)?.stock || p.stock;
    const productoTienda = productosTienda.find(pt => pt.id === p.id);
    const imagenSrc = productoTienda ? productoTienda.imagenes[0] : "https://via.placeholder.com/80";
    const div = document.createElement("div");
    div.className="cart-producto";
    div.innerHTML = `
      <img src="${imagenSrc}" alt="${p.titulo}">
      <div class="cart-producto-info">
        <h3>${p.titulo}</h3>
        <p>Price: $${p.price.toFixed(2)}</p>
        <p>Quantity: 
          <button class="boton-cantidad" data-id="${p.id}" data-action="minus">‚àí</button>
          <span>${p.quantity}</span>
          <button class="boton-cantidad" data-id="${p.id}" data-action="plus" ${p.quantity>=productoStock?'disabled':''}>+</button>
        </p>
      </div>
      <button class="boton-carrito cart-eliminar" data-id="${p.id}">Delete</button>
    `;
    cartProductosEl.appendChild(div);
  });

  document.querySelectorAll(".cart-eliminar").forEach(btn=>{
    btn.onclick=()=>{
      const id=btn.dataset.id;
      cart=cart.filter(p=>p.id!==id);
      localStorage.setItem("productos-en-cart", JSON.stringify(cart));
      actualizarCarrito();
    }
  });

  document.querySelectorAll(".boton-cantidad").forEach(btn=>{
    btn.onclick=()=>{
      const id=btn.dataset.id;
      const accion=btn.dataset.action;
      const producto=cart.find(p=>p.id===id);
      const stock=productosTienda.find(pt=>pt.id===id)?.stock || producto.stock;
      if(accion==="plus" && producto.quantity<stock) producto.quantity++;
      if(accion==="minus" && producto.quantity>1) producto.quantity--;
      localStorage.setItem("productos-en-cart", JSON.stringify(cart));
      actualizarCarrito();
    }
  });

  document.getElementById("cart-count").textContent = cart.reduce((acc,p)=>acc+p.quantity,0);
}

document.getElementById("cart-acciones-vaciar").onclick=()=>{
  localStorage.removeItem("productos-en-cart");
  cart=[];
  actualizarCarrito();
};

document.getElementById("cart-acciones-buy").onclick = () => {
  if(cart.length===0){ alert("Your cart is empty! ‚ùå"); return; }

  // Guardar estado seleccionado
  const estadoCliente = document.getElementById("estado").value;
  localStorage.setItem("estado-cliente", estadoCliente);

  localStorage.setItem("productos-en-cart", JSON.stringify(cart));
  window.location.href = "card-charge.html";
};

// Submenu toggle
document.querySelectorAll(".toggle-submenu").forEach(btn=>{
  btn.addEventListener("click", ()=>{
    const submenu = btn.nextElementSibling;
    submenu.style.display = submenu.style.display==="block"?"none":"block";
  });
});

actualizarCarrito();
</script>
</body>
</html>
